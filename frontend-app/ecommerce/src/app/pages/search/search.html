<div class="min-h-screen bg-gray-50 p-6">
  <div class="max-w-4xl mx-auto">
    <div class="text-center mb-8">
      <h1 class="text-3xl font-bold text-gray-900 mb-2">üîç Search Logs</h1>
      <p class="text-gray-600">Search and filter your e-commerce logs</p>
    </div>

    <div class="bg-white rounded-xl shadow-lg p-8 mb-8">
      <form (ngSubmit)="search(); $event.preventDefault()">
        <!-- Text Search -->
        <div class="mb-6">
          <label for="queryInput" class="block mb-2">
            <strong class="block text-gray-900">Search Query</strong>
            <span class="text-gray-600 text-sm">Search by transaction ID, message, user ID, or any keyword</span>
          </label>
          <input 
            type="text" 
            id="queryInput"
            placeholder="e.g., TX-50001, payment failed, user_1234..."
            class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-primary transition"
            [value]="searchParams().query"
            (input)="updateQuery($any($event.target).value)">
        </div>

        <!-- Filters Row -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
          <!-- Log Level Filter -->
          <div>
            <label for="levelSelect" class="block mb-2">
              <strong class="block text-gray-900">Log Level</strong>
            </label>
            <select 
              id="levelSelect"
              class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-primary transition"
              [value]="searchParams().level"
              (change)="updateLevel($any($event.target).value)">
              @for (level of levels; track level) {
                <option [value]="level">
                  {{ level || 'All Levels' }}
                </option>
              }
            </select>
          </div>

          <!-- Service Filter -->
          <div>
            <label for="serviceSelect" class="block mb-2">
              <strong class="block text-gray-900">Service</strong>
            </label>
            <select 
              id="serviceSelect"
              class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-primary transition"
              [value]="searchParams().service"
              (change)="updateService($any($event.target).value)">
              <option value="">All Services</option>
              <option value="payment-gateway">Payment Gateway</option>
              <option value="fraud-detection">Fraud Detection</option>
              <option value="refund-service">Refund Service</option>
              <option value="order-service">Order Service</option>
              <option value="inventory-service">Inventory Service</option>
              <option value="api-gateway">API Gateway</option>
              <option value="database">Database</option>
            </select>
          </div>
        </div>

        <!-- Date Range -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
          <div>
            <label for="dateFrom" class="block mb-2">
              <strong class="block text-gray-900">From Date</strong>
            </label>
            <input 
              type="datetime-local" 
              id="dateFrom"
              class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-primary transition"
              (change)="updateDateFrom($any($event.target).value)">
          </div>

          <div>
            <label for="dateTo" class="block mb-2">
              <strong class="block text-gray-900">To Date</strong>
            </label>
            <input 
              type="datetime-local" 
              id="dateTo"
              class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-primary transition"
              (change)="updateDateTo($any($event.target).value)">
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="flex gap-4 justify-center mt-8">
          <button 
            type="submit" 
            class="px-8 py-3 bg-gradient-to-r from-primary to-secondary text-white rounded-lg hover:-translate-y-0.5 hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 font-semibold"
            [disabled]="searching()">
            {{ searching() ? '‚è≥ Searching...' : 'üîç Search' }}
          </button>
          
          <button 
            type="button" 
            class="px-8 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition font-semibold"
            (click)="reset()"
            [disabled]="searching()">
            üîÑ Reset
          </button>
        </div>
      </form>
    </div>

    <!-- Search History -->
    @if ((searchHistory$ | async)?.length) {
      <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-xl font-bold text-gray-900">üìú Recent Searches</h3>
          <button class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition text-sm font-medium" (click)="clearHistory()">
            Clear History
          </button>
        </div>

        <div class="flex flex-col gap-3">
          @for (history of (searchHistory$ | async); track $index) {
            <div class="flex justify-between items-center p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition cursor-pointer" (click)="loadFromHistory(history)">
              <div class="flex flex-wrap gap-2">
                @if (history.query) {
                  <span class="inline-flex items-center px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium">{{ history.query }}</span>
                }
                @if (history.level) {
                  <span class="inline-flex items-center px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium">Level: {{ history.level }}</span>
                }
              </div>
              <div class="text-gray-600 hover:text-primary transition font-medium">
                ‚Üª Reuse
              </div>
            </div>
          }
        </div>
      </div>
    }

    <!-- Quick Tips -->
    <div class="bg-white rounded-xl shadow-lg p-6">
      <h3 class="text-xl font-bold text-gray-900 mb-4">üí° Search Tips</h3>
      <ul class="space-y-2 text-gray-700">
        <li><strong class="text-gray-900">Free text search:</strong> Search by transaction ID, user ID, error message, or any text</li>
        <li><strong class="text-gray-900">Filter by level:</strong> Focus on specific log levels (ERROR, WARNING, etc.)</li>
        <li><strong class="text-gray-900">Date range:</strong> Limit search to a specific time period</li>
        <li><strong class="text-gray-900">Combine filters:</strong> Use multiple filters together for precise results</li>
      </ul>
    </div>
  </div>
</div>
